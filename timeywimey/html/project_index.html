<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>TimeyWimey</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/2.2.6/fullcalendar.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/2.2.6/fullcalendar.print.css" media="print" />
    <style type="text/css">
        #calendar {
            margin: 0 auto;
        }
    </style>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>
    <div class="container">
        <h1>Project At A Glance</h1>
        <hr />
        <div class="row" style="margin-bottom: 1em;">
            <div class="col-sm-12">
                <div class="dropdown pull-right">
                    <button id="addMenu" class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown" aria-expanded="true">
                        Add<span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" role="menu" aria-labelledby="addMenu">
                        <li role="presentation"><a role="menu-item" tabindex="-1" href="#" data-toggle="modal" data-target="#scheduleMeeting">Meeting</a></li>
                        <li role="presentation"><a role="menu-item" tabindex="-1" href="#" data-toggle="modal" data-target="#addIssue">Issue</a></li>
                        <li role="presentation"><a role="menu-item" tabindex="-1" href="#" data-toggle="modal" data-target="#timeEntry">Time Entry</a></li>
                        <li role="presentation"><a role="menu-item" tabindex="-1" href="#" data-toggle="modal" data-target="#generateInvoice">Invoice</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <div id="calendar"></div>
            </div>
        </div>
    </div>
    <div id="scheduleMeeting" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
        <form class="form" action="/meetings" method="post">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title">Schedule Meeting</h4>
                    </div>
                    <div class="modal-body">
                        <div class="clearfix">
                            <div class="form-group">
                                <label for="startDate" class="col-sm-6">Start Date</label>
                                <div class="col-sm-6">
                                    <input name="startDate" type="datetime-local" class="form-control" value="" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="endDate" class="col-sm-6">End Date</label>
                                <div class="col-sm-6">
                                    <input name="endDate" type="datetime-local" class="form-control" value="" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="repeating" class="col-sm-11">Repeating</label>
                                <div class="col-sm-1">
                                    <input name="repeating" type="checkbox" class="form-control" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="title" class="col-sm-6">Title</label>
                                <div class="col-sm-6">
                                    <input name="title" type="text" class="form-control" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="summary" class="col-sm-12">Summary</label>
                                <div class="col-sm-12">
                                    <textarea name="summary" class="form-control" rows="3"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Save changes</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div id="addIssue" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
        <form class="form" action="/issues" method="post">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title">Add Issue</h4>
                    </div>
                    <div class="modal-body">
                        <div class="clearfix">
                            <div class="form-group">
                                <label for="start" class="col-sm-6">Start</label>
                                <div class="col-sm-6">
                                    <input name="start" type="datetime-local" class="form-control" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="end" class="col-sm-6">End</label>
                                <div class="col-sm-6">
                                    <input name="end" type="datetime-local" class="form-control" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="type" class="col-sm-6">Type</label>
                                <div class="col-sm-6">
                                    <select name="type" class="form-control">
                                        <option selected>Task</option>
                                        <option>Bug</option>
                                        <option>Feature Request</option>
                                        <option>Impediment</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="title" class="col-sm-6">Title</label>
                                <div class="col-sm-6">
                                    <input name="title" type="text" class="form-control" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="description" class="col-sm-12">Description</label>
                                <div class="col-sm-12">
                                    <textarea name="description" class="form-control" rows="5"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Save changes</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div id="timeEntry" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
        <form class="form" action="/timesheet" method="post">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title">Time Entry</h4>
                    </div>
                    <div class="modal-body">
                        <div class="clearfix">
                            <div class="form-group">
                                <label for="date" class="col-sm-6">Date</label>
                                <div class="col-sm-6">
                                    <input name="date" type="date" class="form-control" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="start" class="col-sm-6">Clock In</label>
                                <div class="col-sm-6">
                                    <input name="start" type="time" class="form-control" min="1" max="24" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="stop" class="col-sm-6">Clock out</label>
                                <div class="col-sm-6">
                                    <input name="stop" type="time" class="form-control" min="1" max="24" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="summary" class="col-sm-12">Summary</label>
                                <div class="col-sm-12">
                                    <textarea name="summary" class="form-control" rows="3"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Save changes</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div id="generateInvoice" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
        <form class="form" action="/invoice" method="post">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title">Generate Invoice</h4>
                    </div>
                    <div class="modal-body">
                        <div class="clearfix">
                            <div class="form-group">
                                <label for="startDate" class="col-sm-6">Start Date</label>
                                <div class="col-sm-6">
                                    <input name="startDate" type="datetime-local" class="form-control" value="" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="endDate" class="col-sm-6">End Date</label>
                                <div class="col-sm-6">
                                    <input name="endDate" type="datetime-local" class="form-control" value="" />
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="lineitem" class="col-sm-12">Billable Items</label>
                                <div class="col-sm-12">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="taxes" class="col-sm-6">Taxes</label>
                                <div class="col-sm-6">
                                    <input name="taxes" type="number" class="form-control" value="" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer" style="clear: both;">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Save changes</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/2.2.6/fullcalendar.min.js"></script>
    <script>
        $(function () {
            // This can be used to determine the proper path
            var path = window.location.pathname;

            // Initialize the calendar pulling from mulitple sources
            $('div#calendar').fullCalendar({
                header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'month,basicWeek,basicDay'
                },
                defaultDate: moment().format('YYYY-MM-DD'),
                editable: true,
                eventLimit: true,
                eventSources: [
                    {
                        url: path + '/issues/calendar',
                        color: 'grey',
                        textColor: 'black'
                    },
                    {
                        url: path + '/meetings/calendar',
                        color: 'blue',
                        textColor: 'white'
                    },
                    {
                        url: path + '/timesheet/calendar',
                        color: 'purple',
                        textColor: 'white'
                    },
                    {
                        url: path + '/invoices/calendar',
                        color: 'green',
                        textColor: 'white'
                    }
                ],
                eventClick: function (e, js, v) {
                    alert('Interaction with events is currently disabled');
                }
            });

            // Modify the modal form actions to point to the appropriate path
            $('div.modal > form.form').each(function () {
                $(this).attr('action', path + $(this).attr('action'));
            });
        });
    </script>
</body>
</html>
