<!DOCTYPE html>
<html>
    <head lang="en">
        <meta charset="UTF-8">
        <title>diff test</title>
    </head>
    <body>
        <h1>diff test</h1>
        <input placeholder="input the file name" id="fileName" value="/test" />&nbsp;<input type="button" id="openBtn" value="Open it!"><br/>
        <textarea id="content" style="width: 400px;height: 300px;"></textarea><br/>
        <input type="button" id="pullBtn" value="Pull!">&nbsp;
        <input type="button" id="commitBtn" value="Commit!">&nbsp;
        <script type="text/javascript" src="/static/js/lib/jquery-2.1.1.min.js"></script>
        <script type="text/javascript" src="/static/js/lib/diff/diff_match_patch_uncompressed.js"></script>
        <script type="text/javascript" src="/static/js/doc.js"></script>
        <script type="text/javascript">
            function newRequest() {
                return {
                    // just a mock request
                };
            }
            var doc = "";
            $(function () {
                $("#openBtn").click(function () {
                    var fileName = $("#fileName").val();
                    doc = OpenDoc(fileName);
                    if (doc) {
                        $("#content").val(doc.content);
                    }
                });
                $("#pullBtn").click(function () {
                    var content = $("#content").val();
                    doc.setContent(content);
                    doc.pull();
                    $("#content").val(doc.content);
                });
                $("#commitBtn").click(function () {
                    var content = $("#content").val();
                    doc.setContent(content);
                    doc.commit();
                });
            })
        </script>
    </body>
</html>